{
  "enabled": true,
  "name": "问题复盘与规则化",
  "description": "当出现Bug、设计问题、逻辑错误或推翻之前判断时触发，强制输出结构化复盘分析，并要求更新Steering规则。这是把错误变成规则的核心机制。",
  "version": "1",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "## 🔴 问题复盘触发 - 把错误变成规则\n\n请按照以下固定结构进行复盘分析（不可简写）：\n\n---\n\n## 问题描述\n- **表象是什么**：[描述问题的外在表现]\n- **是如何被发现的**：[Bug报告 / 审查发现 / 用户指出 / 自我推翻]\n\n## 根因分析\n- **真实原因**（不是现象）：[深入分析根本原因]\n- **问题类型**：[流程问题 / 认知问题 / 设计问题]\n\n## 当时为什么会犯\n- **哪个假设是错误的**：[列出错误的前提假设]\n- **哪一步缺乏校验**：[指出遗漏的验证环节]\n\n## 解决方案\n- **技术层面如何解决**：[具体的修复方案]\n- **是否有更优解**：[考虑替代方案]\n\n## 未来避免策略（规则化）\n- **新增或修订哪一条工程规则**：[明确的规则描述]\n\n---\n\n## ⚠️ 硬约束：必须更新 Steering\n\n**此 Hook 不算完成，除非你已经更新了 `.kiro/steering/` 或 `CLAUDE.md` 中的规则。**\n\n请按以下格式添加规则到 Steering 文件：\n\n```markdown\n### Rule: [规则名称]\n- 背景：[问题的简要背景]\n- 约束：[具体的禁止或要求]\n- 执行：[如何验证规则被遵守]\n```\n\n完成后请确认：\n1. ✅ 已完成结构化复盘\n2. ✅ 已更新 Steering 规则\n3. ✅ 规则可被未来开发验证"
  },
  "workspaceFolderName": "chat-ai",
  "shortName": "post-issue-reflect"
}